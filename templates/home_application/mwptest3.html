<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <!-- 若您需要使用Kendo UI Professional，请联系版权人获得合法的授权或许可。 -->
    <!-- Bootstrap css -->
    <link href="https://magicbox.bk.tencent.com/static_api/v3/assets/bootstrap-3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <!-- kendo ui css -->
    <link href="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/styles/kendo.common.min.css" rel="stylesheet">
    <link href="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/styles/kendo.default.min.css" rel="stylesheet">
    <!-- font-awesome -->
    <link href="https://magicbox.bk.tencent.com/static_api/v3/assets/fontawesome/css/font-awesome.css" rel="stylesheet">
    <!--蓝鲸提供的公用样式库 -->
    <link href="https://magicbox.bk.tencent.com/static_api/v3/bk/css/bk.css" rel="stylesheet">
    <link href="https://magicbox.bk.tencent.com/static_api/v3/bk/css/bk_pack.css" rel="stylesheet">
    <!-- 如果要使用Bootstrap的js插件，必须先调入jQuery -->
    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/jquery-1.10.2.min.js"></script>
    <!-- 包括所有bootstrap的js插件或者可以根据需要使用的js插件调用　-->
    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/echarts-2.0/echarts-all.js"></script>
    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <!-- 包括所有kendoui的js插件或者可以根据需要使用的js插件调用　-->
    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/kendoui-2015.2.624/js/kendo.all.min.js"></script>
    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/echarts-2.0/echarts-all.js"></script>
    <script src="https://magicbox.bk.tencent.com/static_api/v3/bk/js/bk.js"></script>
    <!-- 数据埋点统计 -->
    <script src="http://magicbox.bk.tencent.com/static_api/analysis.js"></script>
    <!-- 以下两个插件用于在IE8以及以下版本浏览器支持HTML5元素和媒体查询，如果不需要用可以移除 -->
    <!--[if lt IE 9]><script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/html5shiv.min.js"></script><script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/respond.min.js"></script><![endif]-->
</head>

<body class="bg-white" data-bg-color="bg-white">
    <div class="king-page-box">
        <div class="king-container clearfix">
            <nav>
                <div style="width:100%;height:50px;" class="king-header king-header4 ">
                    <div class="king-header-inner">
                        <div class="king-header-brand">
                            <a href="javascript:;">
                                <img src="https://magicbox.bk.tencent.com/static_api/v3/components/horizontal_nav8/images/logo.png" height="30">
                            </a>
                        </div>
                        <div class="king-header-list list2">
                            <ul>
                                <li> <a href="javascript:;"><i class="glyphicon glyphicon-shopping-cart"></i></a> </li>
                                <li> <a href="javascript:;"><i class="glyphicon glyphicon-search"></i></a> </li>
                            </ul>
                        </div>
                        <div class="king-header-list list1">
                            <ul>
                                <li class="active">
                                    <a href="javascript:void(0);" class="f14">
                                        <span>首页</span>
                                    </a>
                                    <ul class="king-submenu"> </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0);" class="f14">
                                        <span>云产品</span>
                                    </a>
                                    <ul class="king-submenu">
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>计算机与网络</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>数据与储存</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>监控与安全</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>部署与管理</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>处理数据与分析</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0);" class="f14">
                                        <span>解决方案</span>
                                    </a>
                                    <ul class="king-submenu">
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>游戏与视频</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>移动应用</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>建站</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>金融</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>智能硬件</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0);" class="f14">
                                        <span>合作伙伴</span>
                                    </a>
                                    <ul class="king-submenu">
                                        <li>
                                            <a href="javascript:void(0);">
                                                <span>计算机与网络</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="container-fluid mb0 ">
                <div class="row">
                    <div class="col-md-8">
                        <div class="panel panel-default mb0">
                            <div class="panel-heading"> 服务器新增\查询 </div>
                            <div class="panel-body">
                                <div class="form-group clearfix ">
                                    <label class="col-sm-3 control-label bk-lh30 pt0">主机名：</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control bk-valign-top" id="host" placeholder="hostname"> </div>
                                </div>
                                <div class="form-group clearfix ">
                                    <label class="col-sm-3 control-label bk-lh30 pt0">主机IP：</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control bk-valign-top" id="ip" placeholder="127.0.0.1"> </div>
                                </div>
                                <div class="form-group clearfix ">
                                    <label class="control-label col-sm-3 bk-lh30 pt0" >操作系统类型：</label>
                                    <div class="col-sm-9">
                                        <div class="radio pt0">
                                            <label class="mr10">
                                                <input type="radio" name="optionsRadios" id="systemtype" class="bk-top5" value="Linux">
                                                <span class="bk-lh30">Linux</span>
                                            </label>
                                            <label class="mr10">
                                                <input type="radio" name="optionsRadios" id="systemtype" class="bk-top5" value="windows">
                                                <span class="bk-lh30">windows</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group clearfix ">
                                    <label class="col-sm-3 control-label bk-lh30 pt0">磁盘分区：</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control bk-valign-top" id="diskdir" placeholder="/data"> </div>
                                </div>
                                <div class="form-group clearfix">
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <button type="button" id="commit" class="king-btn mr10  king-success" onclick="addhost(this)">提交</button>
                                        <button type="button" id="select" class="king-btn king-default ">查询</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <form class="form-vertical p15">
                            <div class="panel mb0 panel-box bordered">
                                <div class="panel-left panel-item bg-reverse">
                                    <p class="f36">59º</p>
                                    <p class="text-muted">多云</p>
                                </div>
                                <div class="panel-right panel-item bg-success"> <i class="fa fa-cloud text-huge"></i> </div>
                            </div>
                            <!-- 设置面板Start -->
                            <!-- 设置面板End -->
                        </form>
                        <div class="panel mb0 panel-box">
                            <div class="panel-top  bg-info">
                                <div class="divider divider"></div> <i class="fa fa-cloud f36"></i>
                                <div class="divider divider"></div>
                            </div>
                            <div class="list-justified-container">
                                <ul class="list-justified text-center">
                                    <li>
                                        <p class="f24">575</p>
                                        <p class="text-muted">微博</p>
                                    </li>
                                    <li>
                                        <p class="f24">23</p>
                                        <p class="text-muted">关注</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- 设置面板Start -->
                        <!-- 设置面板End -->
                    </div>
                </div>
            </div>
            <div class="panel panel-default mb0">
                <div class="panel-heading"> 主机信息 </div>
                <div class="panel-body">
                    <table class="table mb0 pr15 ranger-box2  ">
                        <thead>
                        <tr>
                            <th style="width: 70px;">#</th>
                            <th style="width: 15%;">主机名</th>
                            <th style="width: 15%;">位置</th>
                            <th style="width: 15%;">操作系统类型</th>
                            <th style="width: 15%;">磁盘目录</th>
                            <th style="width: 15%;">创建时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                        <tbody>
                            <tr>
                            <th style="width: 70px;">0</th>
                            <th style="width: 15%;">VM_126_220_centos</th>
                            <th style="width: 15%;">19.23.4.7</th>
                            <th style="width: 15%;">Linux</th>
                            <th style="width: 15%;">/data</th>
                            <th style="width: 15%;">2019-07-15 23:36:09</th>
                            <td>
                                <button class="btn btn-xs btn-success"> <i class="glyphicon glyphicon-ok"></i> </button>
                                <button class="btn btn-xs btn-warning"> <i class="glyphicon glyphicon-edit"></i> </button>
                                <button class="btn btn-xs btn-danger"> <i class="glyphicon glyphicon-remove"></i> </button>
                            </td>
                        </tr>
                        <tr>
                            <th style="width: 70px;">1</th>
                            <th style="width: 15%;">VM_15_13_centos</th>
                            <th style="width: 15%;">190.90.345.23</th>
                            <th style="width: 15%;">Linux</th>
                            <th style="width: 15%;">/mnt</th>
                            <th style="width: 15%;">2019-07-16 00:28:58</th>
                            <td>
                                <button class="btn btn-xs btn-success"> <i class="glyphicon glyphicon-ok"></i> </button>
                                <button class="btn btn-xs btn-warning"> <i class="glyphicon glyphicon-edit"></i> </button>
                                <button class="btn btn-xs btn-danger"> <i class="glyphicon glyphicon-remove"></i> </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <template id="header_tpl_15632021567102">
                        <tr>
                            <th style="width: 70px;">#index#</th>
                            <th style="width: 15%;">#host#</th>
                            <th style="width: 15%;">#ip#</th>
                            <th style="width: 15%;">#systemtype#</th>
                            <th style="width: 15%;">#diskdir#</th>
                            <th style="width: 15%;">#createtime#</th>
                            <th>操作</th>
                        </tr>
                    </template>
                    <template id="tpl_15632021567102">
                        <tr>
                            <th style="width: 70px;">#index#</th>
                            <th style="width: 15%;">#host#</th>
                            <th style="width: 15%;">#ip#</th>
                            <th style="width: 15%;">#systemtype#</th>
                            <th style="width: 15%;">#diskdir#</th>
                            <th style="width: 15%;">#createtime#</th>
                            <td>
                                <button class="btn btn-xs btn-success"> <i class="glyphicon glyphicon-ok"></i> </button>
                                <button class="btn btn-xs btn-warning"> <i class="glyphicon glyphicon-edit"></i> </button>
                                <button class="btn btn-xs btn-danger"> <i class="glyphicon glyphicon-remove"></i> </button>
                            </td>
                        </tr>
                    </template>
                    <!-- 设置面板End -->
                </div>
            </div>
        </div>
    </div>
    <script>
        function addhost(obj){
        var host = $('#host').val();
        var ip = $('#ip').val();
        var systemtype = $('#systemtype').val();
        var diskdir = $('#diskdir').val();
        $.post('${SITE_URL}//hostinfo_mwptest3/', {'host': host, 'ip': ip, 'systemtype': systemtype, 'diskdir': diskdir}, function(data){
                // console.log(data)
                if(data.result){
                    var job_instance_id = data.data;
                    // 异步请求后台数据
                    
                    console.log("this is test")
                }else{
                    // alert("获取失败")
                    gethost();
                }
            }, 'json');
    }


        function gethost(){
                function renderTpl(str, cfg) {
                    var re = /(#(.+?)#)/g;

                    return str.replace(re, function() {
                        var val = cfg[arguments[2]]+'';
                        if(typeof val == 'undefined') {
                            val = '';
                        }
                        return val;
                    });
                }

                // 异步请求后台数据
                $.ajax({
                    url: '${SITE_URL}//hostinfo_mwptest3/',
                    type: 'GET',
                    success: function(res){
                        var _html = ' ';
                        var list = res.items;
                        var tpl = $('#tpl_15632021567102').html();
                        var headerTpl =  $('#header_tpl_15632021567102').html();
                        for (var i=0,len=list.length; i < len; i++){
                            var item = list[i];
                            _html += renderTpl(tpl, item)
                        }
                        $('.ranger-box2 tbody').html(_html);
                        console.log(_html)
                        $('.ranger-box2 thead').html(renderTpl(headerTpl,res.catalogues));
                        // console.log(headerTpl,res.catalogues)
                    }
                });
            };
            $(document).ready(function(){
                gethost();
            });
    </script>
</body>

</html>